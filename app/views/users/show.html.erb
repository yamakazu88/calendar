<div class="mypage">

  <%= form_with(url: search_posts_path, local: true, method: :get, class: "search-form") do |form| %>
    <%= form.text_field :keyword, placeholder: "投稿を検索する", class: "search-input" %>
    <%= form.submit "検索", class: "search-btn" %>
  <% end %>
  <br>

  <div class="posts-list">
    <h1 class="mypage-title">＜<%= @nickname %>さんの直近の通院記録＞</h1>
    <br>
    <% if @posts.any? %>
      <table>
        <thead>
          <tr>
            <th>タイトル</th>
            <th>日付</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @posts.each do |post| %>
            <tr>
              <td><%= post.title %></td>
              <td><%= post.start_time.strftime("%Y-%m-%d") %></td>
              <td><%= link_to '詳細', post %></td>
              <td><%= link_to '編集', edit_post_path(post.id) %></td>
              <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      まだ投稿がありません
    <% end %>
    <%= paginate @posts %>
  </div>
  <br>
  <%= link_to '体調管理ページへ', conditions_path %>
  <br>

  <%= week_calendar events: @posts do |date, posts| %>
    <%= date.day %>
    <% if posts.any? %>
      <% posts.each do |post| %>
        <div>
          <%= link_to post.title, post %>
        </div>
      <% end %>
    <% end %>
  <% end %>
  <br>


  <div class="category-area">
    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category1.name %>の投稿一覧＞</h1>
      <br>
      <% if @post1.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post1.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post1 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category2.name %>の投稿一覧＞</h1>
      <br>
      <% if @post2.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post2.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post2 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category3.name %>の投稿一覧＞</h1>
      <br>
      <% if @post3.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post3.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post3 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category4.name %>の投稿一覧＞</h1>
      <br>
      <% if @post4.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post4.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post4 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category5.name %>の投稿一覧＞</h1>
      <br>
      <% if @post5.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post5.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post5 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category6.name %>の投稿一覧＞</h1>
      <br>
      <% if @post6.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post6.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post6 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category7.name %>の投稿一覧＞</h1>
      <br>
      <% if @post7.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post7.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post7 %>
    </div>
    <br>
    <br>

    <div class="category-list">
      <h1 class="mypage-title">＜<%= @category8.name %>の投稿一覧＞</h1>
      <br>
      <% if @post8.any? %>
        <table>
          <thead>
            <tr>
              <th>タイトル</th>
              <th>日付</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @post8.each do |post| %>
              <tr>
                <td><%= post.title %></td>
                <td><%= post.start_time.strftime("%Y-%m-%d %H:%M") %></td>
                <td><%= link_to '詳細', post %></td>
                <td><%= link_to '編集', edit_post_path(post.id) %></td>
                <td><%= link_to '削除',post_path(post.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        まだ投稿がありません
      <% end %>
      <%= paginate @post8 %>
    </div>
    <br>

  </div>
</div>